# FeedbackHub 开发任务计划

## Phase 1: 基础设施 (Foundation)

### 1.1 项目初始化

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| F001 | 创建 Rust 后端项目 | 使用 Cargo 初始化，配置项目结构 | 0.5d |
| F002 | 创建 Flutter App 项目 | 使用 flutter create 初始化 | 0.5d |
| F003 | 配置 CI/CD 基础 | GitHub Actions 工作流 | 1d |
| F004 | 搭建开发环境 | 本地开发、调试工具链 | 0.5d |

### 1.2 核心框架搭建

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| F005 | Rust 框架集成 | Axum + Tokio + Tracing | 1d |
| F006 | 配置管理模块 | YAML/JSON 配置加载 | 0.5d |
| F007 | 日志系统 | 结构化日志 + 文件输出 | 0.5d |
| F008 | 错误处理 | 统一错误类型 + 错误码 | 0.5d |

---

## Phase 2: 数据存储层 (Storage Layer)

### 2.1 嵌入式存储 (单机模式)

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| S001 | SQLite 存储抽象 | rusqlite 连接池封装 | 1d |
| S002 | 数据模型实现 | 开发者、产品、反馈、消息模型 | 1d |
| S003 | CRUD 基础操作 | 各表的增删改查 | 2d |
| S004 | sled 缓存层 | 会话、Token 缓存 | 1d |
| S005 | 文件存储 | 本地附件存储 | 0.5d |

### 2.2 分布式存储 (可选)

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| S006 | PostgreSQL 适配器 | 切换存储后端 | 1d |
| S007 | Redis 适配器 | 缓存后端切换 | 0.5d |
| S008 | MinIO 适配器 | 对象存储切换 | 0.5d |
| S009 | 存储抽象层 | 统一接口支持多后端 | 1d |

---

## Phase 3: 认证授权 (Authentication)

### 3.1 开发者认证

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| A001 | 开发者注册 | 邮箱注册、密码加密 | 1d |
| A002 | 开发者登录 | JWT Token 签发 | 1d |
| A003 | Token 刷新 | Access + Refresh Token | 0.5d |
| A004 | 密码重置 | 邮箱验证码 | 1d |

### 3.2 SDK 认证

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| A005 | AppKey 验证 | SDK 请求认证 | 0.5d |
| A006 | 请求签名 | API 签名验证 | 0.5d |
| A007 | WebSocket 认证 | 实时通信认证 | 0.5d |

---

## Phase 4: 核心 API (Core API)

### 4.1 反馈管理

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| API001 | 创建反馈 | SDK 提交反馈接口 | 1d |
| API002 | 查询反馈列表 | 分页、筛选、搜索 | 1d |
| API003 | 反馈详情 | 包含附件、对话历史 | 0.5d |
| API004 | 更新反馈状态 | 状态流转 | 0.5d |
| API005 | 分配反馈 | 分配给团队成员 | 0.5d |
| API006 | 附件上传 | 文件上传接口 | 1d |

### 4.2 消息通讯

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| API007 | 发送消息 | 开发者回复用户 | 0.5d |
| API008 | 查询消息 | 对话历史 | 0.5d |
| API009 | WebSocket 实时消息 | 实时推送 | 1.5d |
| API010 | 消息已读 | 已读状态同步 | 0.5d |

### 4.3 推送管理

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| API011 | 创建推送任务 | 推送接口 | 1d |
| API012 | 推送统计 | 送达率、点击率 | 0.5d |
| API013 | 定时推送 | 延迟任务 | 1d |

### 4.4 产品管理

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| API014 | 创建产品 | App 创建 | 0.5d |
| API015 | 产品列表 | 多产品管理 | 0.5d |
| API016 | 团队管理 | 成员添加、角色设置 | 1d |
| API017 | API 密钥管理 | 密钥生成、吊销 | 0.5d |

---

## Phase 5: SDK 开发 (SDK Development)

### 5.1 JavaScript SDK

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| SDK001 | SDK 核心 | 初始化、配置 | 1d |
| SDK002 | 反馈提交 | submitFeedback 方法 | 0.5d |
| SDK003 | 附件上传 | uploadFile 方法 | 0.5d |
| SDK004 | WebSocket | 实时消息监听 | 1d |
| SDK005 | UI 组件 | 悬浮按钮、反馈弹窗 | 1d |
| SDK006 | 文档和示例 | 使用文档 | 0.5d |

### 5.2 Swift SDK

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| SDK007 | SDK 核心 | 初始化、配置 | 1d |
| SDK008 | 反馈提交 | Swift 方法封装 | 0.5d |
| SDK009 | 附件上传 | 图片/文件上传 | 0.5d |
| SDK010 | WebSocket | Starscream 集成 | 1d |
| SDK011 | UI 组件 | iOS 嵌入式 UI | 1d |

### 5.3 Kotlin SDK

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| SDK012 | SDK 核心 | 初始化、配置 | 1d |
| SDK013 | 反馈提交 | Kotlin 方法封装 | 0.5d |
| SDK014 | 附件上传 | 图片/文件上传 | 0.5d |
| SDK015 | WebSocket | OkHttp WebSocket | 1d |
| SDK016 | UI 组件 | Android 嵌入式 UI | 1d |

---

## Phase 6: 开发者 App (Flutter App)

### 6.1 基础架构

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| APP001 | 项目结构 | 目录组织 | 0.5d |
| APP002 | 网络层 | Dio 封装 | 1d |
| APP003 | 状态管理 | BLoC 基础 | 1d |
| APP004 | 本地存储 | SharedPreferences/Hive | 0.5d |
| APP005 | 路由管理 | GoRouter 配置 | 0.5d |

### 6.2 认证模块

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| APP006 | 登录页 | 邮箱登录 | 1d |
| APP007 | 注册页 | 用户注册 | 0.5d |
| APP008 | 找回密码 | 邮箱验证 | 0.5d |
| APP009 | Token 管理 | 自动刷新 | 0.5d |

### 6.3 核心功能

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| APP010 | 首页 | 今日概览 | 1d |
| APP011 | 反馈列表 | 筛选、搜索 | 1.5d |
| APP012 | 反馈详情 | 内容、附件 | 1d |
| APP013 | 消息列表 | 会话列表 | 1d |
| APP014 | 聊天页面 | 实时消息 | 2d |
| APP015 | 推送管理 | 创建推送 | 1d |
| APP016 | 统计分析 | 图表展示 | 1.5d |

### 6.4 消息推送

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| APP017 | Firebase 集成 | 推送接收 | 1d |
| APP018 | 本地通知 | 离线消息提醒 | 0.5d |
| APP019 | 角标管理 | 未读数 | 0.5d |

### 6.5 设置与个人

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| APP020 | 个人资料 | 头像、名称 | 0.5d |
| APP021 | 通知设置 | 推送偏好 | 0.5d |
| APP022 | 主题切换 | 亮色/暗色 | 0.5d |

---

## Phase 7: Web 管理后台 (Web Admin)

### 7.1 基础功能

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| WEB001 | 项目初始化 | React + TS | 0.5d |
| WEB002 | UI 框架 | Tailwind + 组件库 | 1d |
| WEB003 | 认证页面 | 登录、注册 | 1d |
| WEB004 | 主布局 | 侧边栏、导航 | 0.5d |

### 7.2 功能页面

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| WEB005 | 反馈管理 | 列表、详情、状态 | 2d |
| WEB006 | 消息通讯 | 实时聊天 | 1.5d |
| WEB007 | 产品设置 | 应用配置 | 1d |
| WEB008 | 团队管理 | 成员、角色 | 1d |
| WEB009 | 数据统计 | 图表、导出 | 1.5d |
| WEB010 | 系统设置 | 账户、推送设置 | 1d |

---

## Phase 8: 部署与运维 (Deployment)

### 8.1 单机部署

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| DEP001 | All-in-One 二进制 | 打包所有依赖 | 1d |
| DEP002 | 命令行工具 | init/run/stop | 1d |
| DEP003 | 配置文件 | YAML 配置 | 0.5d |
| DEP004 | 服务脚本 | systemd/init.d | 0.5d |
| DEP005 | 反向代理 | Nginx 配置 | 0.5d |
| DEP006 | SSL 证书 | Let's Encrypt | 0.5d |

### 8.2 分布式部署

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| DEP007 | Docker 镜像 | 多阶段构建 | 1d |
| DEP008 | K8s 配置 | Deployment/Service | 1d |
| DEP009 | 负载均衡 | Nginx/HAProxy | 0.5d |
| DEP010 | 健康检查 | 存活探针 | 0.5d |
| DEP011 | 日志收集 | ELK/Loki | 1d |
| DEP012 | 监控告警 | Prometheus + Grafana | 1d |

---

## Phase 9: 测试与优化 (Testing)

### 9.1 单元测试

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| TEST001 | Rust 单元测试 | 核心逻辑覆盖 | 2d |
| TEST002 | Flutter 单元测试 | BLoC 测试 | 1d |
| TEST003 | Web 单元测试 | 组件测试 | 1d |

### 9.2 集成测试

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| TEST004 | API 集成测试 | Postman/Newman | 1d |
| TEST005 | E2E 测试 | 完整流程 | 2d |

### 9.3 性能优化

| 序号 | 任务 | 描述 | 预计工时 |
|------|------|------|---------|
| OPT001 | 性能测试 | 压力测试 | 1d |
| OPT002 | SQL 优化 | 索引、查询优化 | 1d |
| OPT003 | 缓存优化 | Redis/sled 调优 | 0.5d |
| OPT004 | CDN 集成 | 静态资源加速 | 0.5d |

---

## 任务统计

| Phase | 任务数量 | 预计工时 |
|-------|---------|---------|
| Phase 1: 基础设施 | 8 | 4d |
| Phase 2: 存储层 | 9 | 7d |
| Phase 3: 认证 | 7 | 4d |
| Phase 4: 核心 API | 17 | 11d |
| Phase 5: SDK | 16 | 10d |
| Phase 6: Flutter App | 22 | 15d |
| Phase 7: Web 后台 | 10 | 9d |
| Phase 8: 部署 | 12 | 7.5d |
| Phase 9: 测试 | 8 | 8.5d |
| **总计** | **109** | **~76d** |

---

## 开发优先级

### 第一阶段 (MVP) - 约 30 天

1. **基础设施** (F001-F008) - 4d
2. **存储层单机** (S001-S005) - 5.5d
3. **认证** (A001-A007) - 4d
4. **核心 API** (API001-API006) - 5d
5. **JS SDK** (SDK001-SDK006) - 4d
6. **Flutter App 核心** (APP001-APP014) - 12d
7. **部署单机** (DEP001-DEP006) - 4d

### 第二阶段 (完善) - 约 25 天

1. **Swift/Kotlin SDK** (SDK007-SDK016) - 10d
2. **Web 后台** (WEB001-WEB010) - 9d
3. **推送功能** (API011-API013, APP017-APP019) - 5d

### 第三阶段 (分布式) - 约 15 天

1. **分布式存储** (S006-S009) - 3d
2. **K8s 部署** (DEP007-DEP012) - 6d
3. **测试优化** (TEST001-TEST004, OPT001-OPT004) - 6d

---

*计划版本：v1.0*
*最后更新：2026年2月21日*
